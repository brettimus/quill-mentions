!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(a){a.prototype.renderCurrentChoices=function(){var a;this.hasChoices()?this.render(this._getChoicesHTML()):(a=this.noMatchHTML,console.log(a),a?this.render(a):this.hide())},a.prototype.render=function(a){var b=this.options.template,c=b.replace("{{choices}}",a);this.container.innerHTML=c},a.prototype._getChoicesHTML=function(){return this.currentChoices.map(this._renderChoice,this).join("")},a.prototype._renderChoice=function(a){var b,c=this.options.choiceTemplate;return b=c.replace("{{choice}}",a.name).replace("{{data}}",a.data)},a.prototype.hasChoices=function(){return this.currentChoices&&this.currentChoices.length}}},{}],2:[function(a,b,c){function d(a){var b=e({},g,a);return a.ajax&&(b.ajax=e({},h,a.ajax)),b}var e=a("../utilities/extend"),f=a("../utilities/identity"),g={ajax:!1,choiceMax:6,choices:[],choiceTemplate:'<li data-mention="{{data}}">{{choice}}</li>',containerClassName:"ql-mentions",hideMargin:"-10000px",matcher:/@\w+$/i,mentionClass:"mention-item",noMatchMessage:"Ruh Roh Raggy!",noMatchTemplate:"<li class='ql-mention-choice-no-match'><i>{{message}}</i></li>",offset:10,template:"<ul>{{choices}}</ul>"},h={format:f,path:null,queryParameter:"q"};b.exports=d},{"../utilities/extend":10,"../utilities/identity":11}],3:[function(a,b,c){function d(a){a.prototype.addFormat=function(a){this.quill.addFormat("mention",{tag:"SPAN","class":"ql-"})}}b.exports=d},{}],4:[function(a,b,c){(function(b){b.QuillMentions=a("./mentions")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./mentions":6}],5:[function(a,b,c){function d(){h.call(this,1)}function e(){h.call(this,-1)}function f(){var a,b,c=this.selectedChoiceIndex;-1!==c&&(a=this.container.querySelectorAll("li"),0!==a.length&&(b=a[c],this.addMention(b),this.selectedChoiceIndex=-1))}function g(){this.hide(),this.quill.focus()}function h(a){var b,c,d,e,f=this.selectedChoiceIndex;return b=this.container.querySelectorAll("li"),0===b.length?void(this.selectedChoiceIndex=-1):(-1!==f&&(c=b[f],l(c,m)),d=i(f+a,b.length),e=b[d],void(e?(k(e,m),this.selectedChoiceIndex=d):console.log("Indexing error on node returned by querySelectorAll")))}function i(a,b){if(0>=b)throw new Error("WTF are you doing? _normalizeIndex needs a nonnegative, nonzero modulo.");for(;0>a;)a+=b;return a%b}var j=a("./utilities/dom"),k=j.addClass,l=j.removeClass,m="ql-mention-choice-selected",n={13:f,27:g,38:e,40:d};b.exports=n},{"./utilities/dom":9}],6:[function(a,b,c){function d(a,b){this.quill=a,this.options=i(b),this.container=this.quill.addContainer(this.options.containerClassName),this.currentChoices=null,this.currentMention=null,this.selectedChoiceIndex=-1,this.hide(),this.addFormat(),this.addListeners()}var e=a("./controller"),f=a("./format"),g=a("./search"),h=a("./view"),i=a("./defaults/defaults"),j=a("./keyboard");e(d),f(d),g(d),h(d),b.exports=d,d.prototype.addListeners=function(){var a=this.textChangeHandler.bind(this),b=this.addMentionHandler.bind(this),c=this.keyboardHandler.bind(this);this.quill.on(this.quill.constructor.events.TEXT_CHANGE,a),this.container.addEventListener("click",b,!1),this.container.addEventListener("touchend",b,!1),this.quill.container.addEventListener("keyup",c,!1)},d.prototype.textChangeHandler=function(a){var b,c,d=this.findMention();d?(this.currentMention=d,b=d[0].replace("@",""),c=this,this.search(b,function(a){c.currentChoices=a.slice(0,c.options.choiceMax),c.renderCurrentChoices(),c.show()})):this.isMentioning()&&(this.range=null,this.hide())},d.prototype.keyboardHandler=function(a){var b=a.keyCode||a.which;(this.isMentioning()||13===b)&&(console.log("We are mentioning!"),this._dispatchKeycode(b),a.stopPropagation(),a.preventDefault())},d.prototype._dispatchKeycode=function(a){var b=j[a];b&&(this.quill.setSelection(this.range),b.call(this))},d.prototype.hasSelection=function(){return-1!==this.selectedChoiceIndex},d.prototype.findMention=function(){var a,b;return this.range=this.quill.getSelection(),this.range?(a=this.quill.getText(0,this.range.end),b=this.options.matcher.exec(a)):void 0},d.prototype.addMentionHandler=function(a){var b=a.target||a.srcElement;"li"===b.tagName&&(console.log(b),this.addMention(b)),a.stopPropagation()},d.prototype.addMention=function(a){var b=this.currentMention.index,c="@"+a.innerText,d=b+c.length+1;this.hide(),this.quill.deleteText(b,b+this.currentMention[0].length),this.quill.insertText(b,c,"mention",this.options.mentionClass+"-"+a.dataset.mention),this.quill.insertText(b+c.length," "),this.quill.setSelection(d,d)},d.prototype.isMentioning=function(){return-1!==this.container.className.search(/ql\-is\-mentioning/)}},{"./controller":1,"./defaults/defaults":2,"./format":3,"./keyboard":5,"./search":7,"./view":12}],7:[function(a,b,c){function d(a,b){var c=this.options.ajax?this.ajaxSearch:this.staticSearch;c.call(this,a,b)}function e(a){return function(b){return-1!==b.name.toLowerCase().indexOf(a.toLowerCase())}}function f(a,b){return function(c){a?a(c.map(b)):h("ajaxSearch")}}function g(a){console.log("Loading json errored...",a)}function h(a){console.log("Warning!",a,"was not provided a callback. Don't be a ding-dong.")}var i=a("./utilities/ajax").loadJSON;b.exports=function(a){a.prototype.search=d,a.prototype.staticSearch=function(a,b){var c=this.options.choices.filter(e(a));b||h("staticSearch"),b(c)},a.prototype.ajaxSearch=function b(a,c){b.latest&&b.latest.abort();var d=this.options.ajax.path,e=this.options.ajax.format,h=this.options.ajax.queryParameter,j=d+"?"+h+"="+encodeURIComponent(a);b.latest=i(j,f(c,e),g)}}},{"./utilities/ajax":8}],8:[function(a,b,c){b.exports={loadJSON:function(a,b,c){var d=new XMLHttpRequest;return d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(200===d.status?b&&b(JSON.parse(d.responseText)):c&&c(d))},d.open("GET",a,!0),d.send(),d}}},{}],9:[function(a,b,c){function d(a,b){a&&(a.className?-1===a.className.indexOf(b)&&(a.className+=" "+b):a.className=b)}function e(a,b){if(a)for(;-1!==a.className.indexOf(b);)a.className=a.className.replace(b,"")}function f(a){var b=[a];if(!a)return[];for(;a.previousSibling;)b.push(a.previousSibling),a=a.previousSibling;return b}b.exports.addClass=d,b.exports.removeClass=e,b.exports.getOlderSiblingsInclusive=f},{}],10:[function(a,b,c){function d(a){for(var b=[].slice.call(arguments,0),c=b[0],d=1;d<b.length;d++)c=e(c,b[d]);return c}function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}b.exports=d},{}],11:[function(a,b,c){function d(a){return a}b.exports=d},{}],12:[function(a,b,c){var d=a("./utilities/dom"),e=d.addClass,f=d.removeClass,g=d.getOlderSiblingsInclusive;b.exports=function(a){a.prototype.hide=function(){f(this.container,"ql-is-mentioning"),this.container.style.marginTop="0",this.range&&this.quill.setSelection(this.range),this.range=null},a.prototype.show=function(a){var b,c=(this.quill.container,this.quill.editor.root),d=10,f=-d;this.range=this.quill.getSelection(),b=this._findOffsetLines(this.range),f+=c.getBoundingClientRect().height,f-=b.reduce(function(a,b){return a+b.getBoundingClientRect().height},0),this.container.style.marginTop="-"+f+"px",e(this.container,"ql-is-mentioning"),this.container.focus()},a.prototype._findMentionNode=function(a){var b,c,d,e;for(b=this.quill.editor.doc.findLeafAt(a.start,!0),c=b[0],d=b[1],c&&(e=c.node);e&&"DIV"!==e.tagName;)e=e.parentNode;return e?e:null},a.prototype._findOffsetLines=function(a){var b=this._findMentionNode(a);return g(b)},Object.defineProperty(a.prototype,"noMatchHTML",{get:function(){var a=this.options.noMatchTemplate,b=this.options.noMatchMessage;return b?a.replace("{{message}}",b):null}})}},{"./utilities/dom":9}]},{},[1,2,3,4,5,6,7,8,9,10,11,12]);